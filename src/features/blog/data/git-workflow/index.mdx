export const author = "Flavio Silva";

export const authorImage = "flavio-thumb.jpg";

export const authorUrl = "https://www.flsilva.com";

export const changefreq = "monthly";

export const contentType = "blog-post";

export const date = "2013-01-21T00:00:00";

export const description =
  "Learn about Git's three file states (modified, staged and committed), and its three corresponding sections (working directory, staging area and Git directory).";

export const heroImage = "hero.jpg";

export const heroImageCreditText = "Image by Freepik";

export const heroImageCreditUrl =
  "https://www.freepik.com/free-photo/metaverse-concept-collage-design_27989408.htm#query=portal%20astronaut&position=11&from_view=search&track=ais";

export const heroImageHeight = 1047;

export const heroImageWidth = 2000;

export const priority = 0.6;

export const slug = "git-workflow";

export const tags = ["git"];

export const title = "Git workflow";

export const tweetText =
  "Learn about the three file states in Git: modified, staged and committed.";

export const tweetVia = "flsilva7";

export const tweetCardImage = "hero.jpg";

import { InfoBox } from "@/features/shared/ui/boxes/InfoBox";
import { ImageWithCaption } from "@/features/shared/ui/ImageWithCaption";

## Introduction

If you're new to [Git](http://git-scm.com/) or want to know a little more about its basics and its distributed
model, do not hesitate to read my [Introduction to Git](/blog/introducing-git/).

<InfoBox theme="warning">
  Don't try to run the commands showed in this article, they have missing
  parameters. This article was written to be a conceptual explanation about the
  Git workflow. Playing with its commands to better understand its concepts is
  the subject of the next article: [Git Basic Commands
  Explained](/blog/git-basic-commands-explained/), which I recommend you read
  next.
</InfoBox>

## The Three File States

[Git](http://git-scm.com/) works with the concept of three different file states: [_committed_](#committed-files), [_modified_](#modified-files) and [_staged_](#staged-files) (Chacon 8).
Each state relates to a specific Git section: [_working directory_](#working-directory), [_staging area_](#staging-area) and [_Git directory_](#git-directory) (repository) (Chacon 8).
Additionally, any new file you add to the [_working directory_](#working-directory) is an [_untracked file_](#untracked-files), which means the file doesn't exist in the repository.

When you create a new repository from scratch running _`$ git init`_ in an empty directory, your [_working directory_](#working-directory) (the physical directory that the files reside on your local machine) is empty.
And if you _`$ git clone`_ some remote repository, your [_working directory_](#working-directory) is fully synchronized with the [_Git directory_](#git-directory) (repository).
Thereafter, any changes you make on any file automatically puts it in a [_modified_](#modified-files) state.
If you add new files, those will be [_untracked_](#untracked-files).
At this time (with modified and/or untracked files), trying to run _`$ git commit`_ to send files from the [_working directory_](#working-directory) to the local repository ([_Git directory_](#git-directory)) will have no effect.
Git only send files that are in the [_staged_](#staged-files) state, which conceptually resides in the [_staging area_](#staging-area), to the repository.
So, before running _`$ git commit`_ you must run _`$ git add`_ to stage files and directories.
When you _add_ files, they go from [_modified_](#modified-files) (or [_untracked_](#untracked-files)) state to [_staged_](#staged-files) ([_staging area_](#staging-area)) state.
After that, running _`$ git commit`_ will change the state of the files from [_staged_](#staged-files) to [_committed_](#committed-files), leaving the [_staging area_](#staging-area) and going to the [_Git directory_](#git-directory) (repository).
Each _`$ git commit`_ represents a snapshot of the project.

<div
  style={{
    width: "100%",
    display: "flex",
    flexDirection: "row",
    justifyContent: "center",
  }}
>
  <div style={{ maxWidth: "400px", flexGrow: 1 }}>
    <ImageWithCaption caption="Git Workflow (Chacon 8)">
      ![Git Workflow](/images/blog/git-workflow/git-workflow-01.png)
    </ImageWithCaption>
  </div>
</div>

<InfoBox theme="warning">
  When you run _`$ git add`_, Git sends a _snapshot_ of the file to the
  [_staging area_](#staging-area), not a _reference_ of the file itself, which
  means if you change that file again after _adding_ and before _commiting_,
  that change is not in the [_staging area_](#staging-area). In such case you
  need to run _`$ git add`_ again for that same file. This is an important
  detail and illustrates how Git works with the snapshot concept.
</InfoBox>

## Summary

### Working directory

_Working directory_ is your local physical directory, where you make changes to your files.

### Staging area

_Staging area_ is a place where Git keeps a reference of all modifications (snapshot of files) to be sent in the next _commit_.

### Git directory

_Git directory_ is the repository, the Git database which stores all files in a compressed form.

### Untracked files

_Untracked files_ exist only in your working directory, i.e., they don't exist in the _Git directory_.

### Modified files

_Modified files_ exist in both your _working directory_ and your _Git directory_, but they have different versions, i.e., the _working directory_ files were changed, but those changes weren't sent to the _stagging area_ by running _`$ git add`_.

### Staged files

_Staged files_ exist in your _working directory_, and a) in the _Git directory_ if they are existing files being changed, or b) do not exist in the _Git directory_ if they are new files being added to the repository for the first time.

### Committed files

_Committed files_ exist in both your _working directory_ and _Git directory_ with the exact same version.

You can run _`$ git status`_ at any time to check the state of your files.

Phew! That was a bit complex, and a pretty much theoretical explanation.
Don't worry if things seem a little confusing right now.
It'll make a lot more sense once we start playing with the commands in practice, which is the subject of the next Git article: [Git Basic Commands Explained](/blog/git-basic-commands-explained/), which I recommend you read next.

## Related posts

- [How to install Git with Homebrew on macOS](/blog/how-to-install-git-with-homebrew-on-macos/)<br />
- [Git Basic Commands Explained](/blog/git-basic-commands-explained/)<br />
- [Git Branching and Merging](/blog/git-branching-and-merging/)<br />
- [Git Remote and Tracking Branches](/blog/git-remote-and-tracking-branches/)<br />
- [Git Tagging](/blog/git-tagging/)<br />
- [Introduction to Git](/blog/introducing-git/)

## Interesting links

- [Git](http://git-scm.com/)<br />
- [Pro Git Book](https://git-scm.com/book/en/v2)

## Bibliography

- Chacon, Scott. _Pro Git_. Apress, 2009.
